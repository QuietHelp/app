{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/tarbipyakurel/Desktop/QuietHelp-app/frontend/lib/chatUtils.ts"],"sourcesContent":["/**\n * Utility functions for chat features\n * Inspired by WhatsApp, Messenger, Instagram, and Omegle\n */\n\n/**\n * Formats timestamp to relative time (e.g., \"Just now\", \"2 min ago\", \"1 hour ago\")\n * Similar to WhatsApp and Messenger\n */\nexport function formatMessageTime(timestamp: number | string): string {\n  const now = Date.now();\n  const messageTime = typeof timestamp === 'string' ? new Date(timestamp).getTime() : timestamp;\n  const diffMs = now - messageTime;\n  const diffSecs = Math.floor(diffMs / 1000);\n  const diffMins = Math.floor(diffSecs / 60);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffSecs < 10) return 'Just now';\n  if (diffSecs < 60) return `${diffSecs}s ago`;\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n\n  // For older messages, show date and time\n  const date = new Date(messageTime);\n  const today = new Date();\n  const yesterday = new Date(today);\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  if (date.toDateString() === today.toDateString()) {\n    return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });\n  } else if (date.toDateString() === yesterday.toDateString()) {\n    return `Yesterday ${date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true })}`;\n  } else {\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: date.getFullYear() !== today.getFullYear() ? 'numeric' : undefined });\n  }\n}\n\n/**\n * Formats timestamp to full date and time for tooltips\n */\nexport function formatFullTimestamp(timestamp: number | string): string {\n  const messageTime = typeof timestamp === 'string' ? new Date(timestamp).getTime() : timestamp;\n  const date = new Date(messageTime);\n  return date.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true,\n  });\n}\n\n/**\n * Groups messages by date for better organization\n * Useful for showing date separators like WhatsApp\n */\nexport function shouldShowDateSeparator(\n  currentMessage: { timestamp: number | string },\n  previousMessage?: { timestamp: number | string }\n): boolean {\n  if (!previousMessage) return true;\n\n  const currentDate = new Date(\n    typeof currentMessage.timestamp === 'string'\n      ? new Date(currentMessage.timestamp).getTime()\n      : currentMessage.timestamp\n  );\n  const previousDate = new Date(\n    typeof previousMessage.timestamp === 'string'\n      ? new Date(previousMessage.timestamp).getTime()\n      : previousMessage.timestamp\n  );\n\n  return (\n    currentDate.getDate() !== previousDate.getDate() ||\n    currentDate.getMonth() !== previousDate.getMonth() ||\n    currentDate.getFullYear() !== previousDate.getFullYear()\n  );\n}\n\n/**\n * Formats date separator (e.g., \"Today\", \"Yesterday\", \"December 25, 2024\")\n */\nexport function formatDateSeparator(timestamp: number | string): string {\n  const date = new Date(typeof timestamp === 'string' ? new Date(timestamp).getTime() : timestamp);\n  const today = new Date();\n  const yesterday = new Date(today);\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  if (date.toDateString() === today.toDateString()) {\n    return 'Today';\n  } else if (date.toDateString() === yesterday.toDateString()) {\n    return 'Yesterday';\n  } else {\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      month: 'long',\n      day: 'numeric',\n      year: date.getFullYear() !== today.getFullYear() ? 'numeric' : undefined,\n    });\n  }\n}\n\n\n"],"names":[],"mappings":"AAAA;;;CAGC,GAED;;;CAGC;;;;;;;;;;AACM,SAAS,kBAAkB,SAA0B;IAC1D,MAAM,MAAM,KAAK,GAAG;IACpB,MAAM,cAAc,OAAO,cAAc,WAAW,IAAI,KAAK,WAAW,OAAO,KAAK;IACpF,MAAM,SAAS,MAAM;IACrB,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IACrC,MAAM,WAAW,KAAK,KAAK,CAAC,WAAW;IACvC,MAAM,YAAY,KAAK,KAAK,CAAC,WAAW;IACxC,MAAM,WAAW,KAAK,KAAK,CAAC,YAAY;IAExC,IAAI,WAAW,IAAI,OAAO;IAC1B,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;IAC5C,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;IAC5C,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,KAAK,CAAC;IAC9C,IAAI,WAAW,GAAG,OAAO,GAAG,SAAS,KAAK,CAAC;IAE3C,yCAAyC;IACzC,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,QAAQ,IAAI;IAClB,MAAM,YAAY,IAAI,KAAK;IAC3B,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;IAExC,IAAI,KAAK,YAAY,OAAO,MAAM,YAAY,IAAI;QAChD,OAAO,KAAK,kBAAkB,CAAC,SAAS;YAAE,MAAM;YAAW,QAAQ;YAAW,QAAQ;QAAK;IAC7F,OAAO,IAAI,KAAK,YAAY,OAAO,UAAU,YAAY,IAAI;QAC3D,OAAO,CAAC,UAAU,EAAE,KAAK,kBAAkB,CAAC,SAAS;YAAE,MAAM;YAAW,QAAQ;YAAW,QAAQ;QAAK,IAAI;IAC9G,OAAO;QACL,OAAO,KAAK,kBAAkB,CAAC,SAAS;YAAE,OAAO;YAAS,KAAK;YAAW,MAAM,KAAK,WAAW,OAAO,MAAM,WAAW,KAAK,YAAY;QAAU;IACrJ;AACF;AAKO,SAAS,oBAAoB,SAA0B;IAC5D,MAAM,cAAc,OAAO,cAAc,WAAW,IAAI,KAAK,WAAW,OAAO,KAAK;IACpF,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO,KAAK,cAAc,CAAC,SAAS;QAClC,OAAO;QACP,KAAK;QACL,MAAM;QACN,MAAM;QACN,QAAQ;QACR,QAAQ;IACV;AACF;AAMO,SAAS,wBACd,cAA8C,EAC9C,eAAgD;IAEhD,IAAI,CAAC,iBAAiB,OAAO;IAE7B,MAAM,cAAc,IAAI,KACtB,OAAO,eAAe,SAAS,KAAK,WAChC,IAAI,KAAK,eAAe,SAAS,EAAE,OAAO,KAC1C,eAAe,SAAS;IAE9B,MAAM,eAAe,IAAI,KACvB,OAAO,gBAAgB,SAAS,KAAK,WACjC,IAAI,KAAK,gBAAgB,SAAS,EAAE,OAAO,KAC3C,gBAAgB,SAAS;IAG/B,OACE,YAAY,OAAO,OAAO,aAAa,OAAO,MAC9C,YAAY,QAAQ,OAAO,aAAa,QAAQ,MAChD,YAAY,WAAW,OAAO,aAAa,WAAW;AAE1D;AAKO,SAAS,oBAAoB,SAA0B;IAC5D,MAAM,OAAO,IAAI,KAAK,OAAO,cAAc,WAAW,IAAI,KAAK,WAAW,OAAO,KAAK;IACtF,MAAM,QAAQ,IAAI;IAClB,MAAM,YAAY,IAAI,KAAK;IAC3B,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;IAExC,IAAI,KAAK,YAAY,OAAO,MAAM,YAAY,IAAI;QAChD,OAAO;IACT,OAAO,IAAI,KAAK,YAAY,OAAO,UAAU,YAAY,IAAI;QAC3D,OAAO;IACT,OAAO;QACL,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,SAAS;YACT,OAAO;YACP,KAAK;YACL,MAAM,KAAK,WAAW,OAAO,MAAM,WAAW,KAAK,YAAY;QACjE;IACF;AACF"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/tarbipyakurel/Desktop/QuietHelp-app/frontend/components/ChatBroadcast.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState, useCallback } from \"react\";\nimport type { IMessage, StompSubscription } from \"@stomp/stompjs\";\nimport { Client } from \"@stomp/stompjs\";\nimport SockJS from \"sockjs-client\";\nimport { formatMessageTime, formatFullTimestamp, shouldShowDateSeparator, formatDateSeparator } from \"../lib/chatUtils\";\nimport { GlobeIcon } from \"lucide-react\";\n\ninterface ChatMessage {\n  username?: string;\n  message: string;\n  timestamp: number | string;\n  senderSessionId?: string;\n}\n\nconst WS_URL = process.env.NEXT_PUBLIC_WS_URL || 'http://localhost:8080/ws';\n\nexport type ChatBroadcastProps = {\n  sessionId: string;\n};\n\nexport default function ChatBroadcast({ sessionId }: ChatBroadcastProps) {\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [input, setInput] = useState('');\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const clientRef = useRef<Client | null>(null);\n  const sessionIdRef = useRef<string>(sessionId);\n  const subscriptionRef = useRef<StompSubscription | null>(null);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const usernameRef = useRef<string>('');\n\n  // Generate username once on mount\n  useEffect(() => {\n    // Generate or retrieve username from localStorage (use a global key for broadcast chat)\n    let username = localStorage.getItem('chat_username_broadcast');\n    if (!username) {\n      // Generate a unique username using timestamp\n      const timestamp = Date.now().toString().slice(-6);\n      const randomNum = Math.floor(Math.random() * 1000);\n      username = `Friend${timestamp}${randomNum}`;\n      localStorage.setItem('chat_username_broadcast', username);\n    }\n    usernameRef.current = username;\n  }, []);\n\n \n  // Load chat history on mount\n  const loadChatHistory = useCallback(async () => {\n    try {\n      const backendUrl = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8080';\n      const response = await fetch(`${backendUrl}/api/chat/history`);\n      \n      if (!response.ok) {\n        throw new Error('Failed to load chat history');\n      }\n      \n      const data = await response.json();\n      if (data.messages && Array.isArray(data.messages)) {\n        setMessages(data.messages);\n      }\n    } catch (err) {\n      console.error('Error loading chat history:', err);\n      // Don't show error to user - just continue without history\n    }\n  }, []);\n\n  // Connect to WebSocket\n  const connect = useCallback(() => {\n    try {\n      // Clean up existing connection\n      if (clientRef.current) {\n        clientRef.current.deactivate();\n      }\n\n      const client = new Client({\n        webSocketFactory: () => new SockJS(WS_URL) as unknown as WebSocket,\n        reconnectDelay: 5000,\n        heartbeatIncoming: 4000,\n        heartbeatOutgoing: 4000,\n        onConnect: () => {\n          setIsConnected(true);\n          setError(null);\n\n          // Subscribe to global chat messages\n          subscriptionRef.current = client.subscribe(\n            '/topic/chat',\n            (message: IMessage) => {\n              try {\n                const data = JSON.parse(message.body) as ChatMessage;\n                \n                // Validate message structure\n                if (data && typeof data.username === 'string' && typeof data.message === 'string') {\n                  setMessages((prev) => [...prev, data]);\n                }\n              } catch (err) {\n                console.error('Error parsing message:', err);\n              }\n            }\n          );\n        },\n        onDisconnect: () => {\n          setIsConnected(false);\n          subscriptionRef.current = null;\n        },\n        onStompError: (frame) => {\n          console.error('STOMP error:', frame.headers['message'], frame.body);\n          setError('Connection error. Reconnecting...');\n        },\n        onWebSocketError: (event) => {\n          console.error('WebSocket error:', event);\n          setError('Connection error. Reconnecting...');\n        },\n      });\n\n      clientRef.current = client;\n      client.activate();\n    } catch (err) {\n      console.error('Error connecting to WebSocket:', err);\n      setError('Failed to connect. Retrying...');\n      \n      // Retry connection after 5 seconds\n      reconnectTimeoutRef.current = setTimeout(() => {\n        connect();\n      }, 5000);\n    }\n  }, []);\n\n  // Keep sessionId ref updated (similar to ChatRoom pattern)\n  useEffect(() => {\n    sessionIdRef.current = sessionId;\n  }, [sessionId]);\n\n  // Initialize connection and load history\n  useEffect(() => {\n    loadChatHistory();\n    connect();\n\n    return () => {\n      // Cleanup on unmount\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n      if (subscriptionRef.current) {\n        subscriptionRef.current.unsubscribe();\n      }\n      if (clientRef.current) {\n        clientRef.current.deactivate();\n      }\n    };\n  }, [connect, loadChatHistory]);\n\n  // Handle manual reconnection\n  const handleReconnect = useCallback(() => {\n    if (clientRef.current && clientRef.current.connected) {\n      return; // Already connected\n    }\n    connect();\n  }, [connect]);\n\n  // Send message\n  const sendMessage = useCallback(async () => {\n    const messageText = input.trim();\n    if (!messageText || !clientRef.current || !clientRef.current.connected) {\n      return;\n    }\n\n    try {\n      // Moderate message before sending\n      const moderationResponse = await fetch('/api/moderate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ message: messageText }),\n      });\n\n      const moderationResult = await moderationResponse.json();\n\n      if (!moderationResult.isAppropriate) {\n        setError(`Message cannot be sent: ${moderationResult.reason || 'Content violates community guidelines'}`);\n        setTimeout(() => setError(null), 5000);\n        return;\n      }\n\n      // Send message with senderSessionId for broadcast chat (similar to ChatRoom pattern)\n      const chatMessage = {\n        message: messageText,\n        username: usernameRef.current,\n        senderSessionId: sessionId, // Use sessionId directly like ChatRoom does\n      };\n\n      clientRef.current.publish({\n        destination: '/app/chat.send',\n        body: JSON.stringify(chatMessage),\n      });\n\n      setInput('');\n      setError(null);\n    } catch (err) {\n      console.error('Error sending message:', err);\n      setError('Failed to send message. Please try again.');\n    }\n  }, [input, sessionId]);\n\n  return (\n    <div className=\"h-[calc(100vh-4rem)] flex flex-col\">\n      <div className=\"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4 sm:p-6 mb-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"h4 text-white mb-1 flex items-center gap-2\" >Global Chat <GlobeIcon className=\"w-4 h-4 text-blue-600\"/></h2>\n            <div className=\"flex items-center gap-2\">\n              <div className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-400 animate-pulse' : 'bg-yellow-400'}`}></div>\n              <p className=\"text-sm text-white/80\">\n                {isConnected ? 'Connected' : 'Connecting...'}\n              </p>\n            </div>\n          </div>\n          {!isConnected && (\n            <button\n              onClick={handleReconnect}\n              className=\"text-xs text-blue-300 hover:text-blue-200 underline px-2 py-1\"\n            >\n              Reconnect\n            </button>\n          )}\n        </div>\n        {error && (\n          <p className=\"text-xs text-red-300 mt-2\">\n            {error}\n          </p>\n        )}\n      </div>\n\n      <div className=\"flex-1 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4 sm:p-6 overflow-y-auto mb-4 min-h-0\">\n        {messages.length === 0 ? (\n          <div className=\"text-center text-white/60 mt-8\">\n            <h3 className=\"h3 text-white mb-1\">Start the conversation!</h3>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {messages.map((m, idx) => {\n              const isMyMessage = m.senderSessionId === sessionIdRef.current; // Same pattern as ChatRoom\n              const timestamp = typeof m.timestamp === 'string' ? new Date(m.timestamp).getTime() : m.timestamp;\n              const showDateSeparator = shouldShowDateSeparator(m, messages[idx - 1]);\n              \n              return (\n                <div key={idx}>\n                  {showDateSeparator && (\n                    <div className=\"flex justify-center my-4\">\n                      <span className=\"text-xs text-white/50 bg-white/10 px-3 py-1 rounded-full\">\n                        {formatDateSeparator(timestamp)}\n                      </span>\n                    </div>\n                  )}\n                  <div className={`flex ${isMyMessage ? 'justify-end' : 'justify-start'} mb-1`}\n                  >\n                    <div \n                      className={`max-w-[75%] sm:max-w-[65%] ${\n                        isMyMessage \n                          ? 'bg-blue-600 text-white rounded-2xl rounded-tr-sm' \n                          : 'bg-white/20 text-white rounded-2xl rounded-tl-sm'\n                      } px-4 py-2.5 shadow-sm`}\n                      title={formatFullTimestamp(timestamp)}\n                    >\n                      <div className=\"text-xs font-medium mb-1 opacity-90\">\n                        {m.username || 'Guest'}\n                      </div>\n                      <div className=\"text-sm sm:text-base wrap-break-word leading-relaxed\">\n                        {m.message}\n                      </div>\n                      <div className={`text-[10px] opacity-70 mt-1.5 flex ${isMyMessage ? 'justify-end' : 'justify-start'}`}>\n                        {formatMessageTime(timestamp)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex gap-2 items-end\">\n        <div className=\"flex-1 relative\">\n          <textarea\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Type a message...\"\n            rows={1}\n            className=\"w-full p-3 sm:p-4 text-base bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 focus:bg-white/20 resize-none min-h-[48px] max-h-32 overflow-y-auto scrollbar-hide disabled:opacity-50\"\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault();\n                sendMessage();\n              }\n            }}\n            disabled={!isConnected}\n            style={{\n              height: 'auto',\n            }}\n            onInput={(e) => {\n              const target = e.target as HTMLTextAreaElement;\n              target.style.height = 'auto';\n              target.style.height = `${Math.min(target.scrollHeight, 128)}px`;\n            }}\n          />\n        </div>\n        <button \n          onClick={sendMessage}\n          disabled={!isConnected || !input.trim()}\n          className=\"px-5 sm:px-6 py-3 sm:py-4 bg-white text-blue-600 rounded-2xl font-medium hover:bg-white/90 active:scale-95 transition-all focus:outline-none focus:ring-2 focus:ring-white/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white flex items-center justify-center min-w-[64px]\"\n        >\n          <svg \n            xmlns=\"http://www.w3.org/2000/svg\" \n            viewBox=\"0 0 24 24\" \n            fill=\"currentColor\" \n            className=\"w-5 h-5\"\n          >\n            <path d=\"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 630, "column": 0}, "map": {"version":3,"sources":["file:///Users/tarbipyakurel/Desktop/QuietHelp-app/frontend/app/chat-broadcast/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport ChatBroadcast from '@/components/ChatBroadcast';\n\nexport default function ChatBroadcastPage() {\n  const [sessionId, setSessionId] = useState<string | null>(null);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    // Mark as mounted to indicate we're on the client\n    setMounted(true);\n    \n    // Get or create sessionId from sessionStorage\n    let storedSessionId = sessionStorage.getItem('sessionId');\n    \n    // If no sessionId exists, create one (for users accessing broadcast chat directly)\n    if (!storedSessionId) {\n      // Generate a new sessionId\n      const newSessionId = crypto.randomUUID ? crypto.randomUUID() : \n        `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n      sessionStorage.setItem('sessionId', newSessionId);\n      storedSessionId = newSessionId;\n    }\n    \n    setSessionId(storedSessionId);\n  }, []);\n\n  // Show loading until mounted and sessionId is loaded\n  if (!mounted || !sessionId) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center gradient-bg\">\n        <div className=\"text-white text-lg\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full overflow-auto\">\n      <div className=\"min-h-screen flex flex-col p-4 sm:p-6 lg:p-8 gradient-bg\">\n        <main className=\"grow flex items-center justify-center\">\n          <div className=\"max-w-4xl mx-auto w-full\">\n            <ChatBroadcast sessionId={sessionId} />\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAgB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,kDAAkD;QAClD,WAAW;QAEX,8CAA8C;QAC9C,IAAI,kBAAkB,eAAe,OAAO,CAAC;QAE7C,mFAAmF;QACnF,IAAI,CAAC,iBAAiB;YACpB,2BAA2B;YAC3B,MAAM,eAAe,OAAO,UAAU,GAAG,OAAO,UAAU,KACxD,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;YAC5D,eAAe,OAAO,CAAC,aAAa;YACpC,kBAAkB;QACpB;QAEA,aAAa;IACf,GAAG,EAAE;IAEL,qDAAqD;IACrD,IAAI,CAAC,WAAW,CAAC,WAAW;QAC1B,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAAqB;;;;;;;;;;;IAG1C;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,uIAAa;wBAAC,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtC"}}]
}