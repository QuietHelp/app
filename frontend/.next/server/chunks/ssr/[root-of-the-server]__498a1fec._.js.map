{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../lib/ws.ts","../../../../lib/chatUtils.ts","../../../../app/chat/%5BroomId%5D/page.tsx","../../../../components/ChatRoom.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client';\n\nimport { Client, type IFrame } from \"@stomp/stompjs\";\nimport SockJS from \"sockjs-client\";\n\nlet stompClient: Client | null = null;\nconst WS_URL = `${process.env.NEXT_PUBLIC_API_URL}/ws`;\n\nexport function getStompClient(): Client {\n  if (stompClient) return stompClient;\n\n  stompClient = new Client({\n    webSocketFactory: () => (new SockJS(WS_URL) as unknown as WebSocket),\n    reconnectDelay: 5000,\n    heartbeatIncoming: 4000,\n    heartbeatOutgoing: 4000,\n    onConnect: () => console.log(\"WebSocket connected\"),\n    onDisconnect: () => console.log(\"WebSocket disconnected\"),\n    onStompError: (frame: IFrame) => {\n      console.error(\"STOMP error:\", frame.headers[\"message\"], frame.body);\n    },\n  });\n\n  stompClient.activate();\n  return stompClient;\n}\n\nexport function waitForConnection(client: Client): Promise<void> {\n  return new Promise((resolve) => {\n    if (client.connected) return resolve();\n\n    const prevOnConnect = client.onConnect;\n    client.onConnect = (frame: IFrame) => {\n      if (prevOnConnect) prevOnConnect(frame);\n      resolve();\n      client.onConnect = prevOnConnect ?? (() => {});\n    };\n  });\n}\n\nexport async function disconnectStompClient(): Promise<void> {\n  if (!stompClient) return;\n  await stompClient.deactivate();\n  stompClient = null;\n}\n\n","/**\n * Utility functions for chat features\n * Inspired by WhatsApp, Messenger, Instagram, and Omegle\n */\n\n/**\n * Formats timestamp to relative time (e.g., \"Just now\", \"2 min ago\", \"1 hour ago\")\n * Similar to WhatsApp and Messenger\n */\nexport function formatMessageTime(timestamp: number | string): string {\n  const now = Date.now();\n  const messageTime = typeof timestamp === 'string' ? new Date(timestamp).getTime() : timestamp;\n  const diffMs = now - messageTime;\n  const diffSecs = Math.floor(diffMs / 1000);\n  const diffMins = Math.floor(diffSecs / 60);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffSecs < 10) return 'Just now';\n  if (diffSecs < 60) return `${diffSecs}s ago`;\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n\n  // For older messages, show date and time\n  const date = new Date(messageTime);\n  const today = new Date();\n  const yesterday = new Date(today);\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  if (date.toDateString() === today.toDateString()) {\n    return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });\n  } else if (date.toDateString() === yesterday.toDateString()) {\n    return `Yesterday ${date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true })}`;\n  } else {\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: date.getFullYear() !== today.getFullYear() ? 'numeric' : undefined });\n  }\n}\n\n/**\n * Formats timestamp to full date and time for tooltips\n */\nexport function formatFullTimestamp(timestamp: number | string): string {\n  const messageTime = typeof timestamp === 'string' ? new Date(timestamp).getTime() : timestamp;\n  const date = new Date(messageTime);\n  return date.toLocaleString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true,\n  });\n}\n\n/**\n * Groups messages by date for better organization\n * Useful for showing date separators like WhatsApp\n */\nexport function shouldShowDateSeparator(\n  currentMessage: { timestamp: number | string },\n  previousMessage?: { timestamp: number | string }\n): boolean {\n  if (!previousMessage) return true;\n\n  const currentDate = new Date(\n    typeof currentMessage.timestamp === 'string'\n      ? new Date(currentMessage.timestamp).getTime()\n      : currentMessage.timestamp\n  );\n  const previousDate = new Date(\n    typeof previousMessage.timestamp === 'string'\n      ? new Date(previousMessage.timestamp).getTime()\n      : previousMessage.timestamp\n  );\n\n  return (\n    currentDate.getDate() !== previousDate.getDate() ||\n    currentDate.getMonth() !== previousDate.getMonth() ||\n    currentDate.getFullYear() !== previousDate.getFullYear()\n  );\n}\n\n/**\n * Formats date separator (e.g., \"Today\", \"Yesterday\", \"December 25, 2024\")\n */\nexport function formatDateSeparator(timestamp: number | string): string {\n  const date = new Date(typeof timestamp === 'string' ? new Date(timestamp).getTime() : timestamp);\n  const today = new Date();\n  const yesterday = new Date(today);\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  if (date.toDateString() === today.toDateString()) {\n    return 'Today';\n  } else if (date.toDateString() === yesterday.toDateString()) {\n    return 'Yesterday';\n  } else {\n    return date.toLocaleDateString('en-US', {\n      weekday: 'long',\n      month: 'long',\n      day: 'numeric',\n      year: date.getFullYear() !== today.getFullYear() ? 'numeric' : undefined,\n    });\n  }\n}\n\n\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport ChatRoom from '@/components/ChatRoom';\n\nexport default function ChatRoomPage() {\n  const params = useParams();\n  const router = useRouter();\n  const roomId = params.roomId as string;\n  \n  const [sessionId, setSessionId] = useState<string | null>(null);\n  const [matchData, setMatchData] = useState<{ roomId: string; peerSessionId: string } | null>(null);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    // Mark as mounted to indicate we're on the client\n    setMounted(true);\n    \n    // Only access sessionStorage on the client side (sessionStorage is per-tab, localStorage is shared)\n    const storedSessionId = sessionStorage.getItem('sessionId');\n    const savedMatchData = sessionStorage.getItem('matchData');\n    \n    setSessionId(storedSessionId);\n    \n    if (savedMatchData) {\n      try {\n        const parsed = JSON.parse(savedMatchData);\n        // Verify the roomId matches\n        if (parsed.roomId === roomId) {\n          setMatchData(parsed);\n        } else {\n          setMatchData(null);\n        }\n      } catch {\n        setMatchData(null);\n      }\n    } else {\n      setMatchData(null);\n    }\n  }, [roomId]);\n\n  useEffect(() => {\n    if (!mounted) return;\n    \n    if (!sessionId) {\n      router.push('/');\n      return;\n    }\n\n    if (!roomId) {\n      router.push('/matching');\n      return;\n    }\n\n    if (!matchData) {\n      router.push('/matching');\n      return;\n    }\n  }, [sessionId, roomId, matchData, router, mounted]);\n\n  // Always show loading until mounted and data is loaded\n  if (!mounted || !sessionId || !matchData) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center gradient-bg\">\n        <div className=\"text-white text-lg\">Loading...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen gradient-bg\">\n      <div className=\"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8\">\n        <ChatRoom sessionId={sessionId} matchData={matchData} />\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useEffect, useRef, useState } from \"react\";\nimport type { IMessage, StompSubscription } from \"@stomp/stompjs\";\nimport { getStompClient, waitForConnection } from \"@/lib/ws\";\nimport { formatMessageTime, formatFullTimestamp, shouldShowDateSeparator, formatDateSeparator } from \"../lib/chatUtils\";\n\nexport type ChatMessage = {\n  roomId?: string;\n  senderSessionId?: string;\n  message: string;\n  timestamp: number | string; // Epoch milliseconds (number) or ISO string\n  username?: string; // Optional, from backend\n};\n\nexport type MatchFound = {\n  roomId: string;\n  peerSessionId: string;\n};\n\nexport type ChatRoomProps = {\n  sessionId: string;\n  matchData: MatchFound;\n};\n\nexport default function ChatRoom({ sessionId, matchData }: ChatRoomProps) {\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [input, setInput] = useState(\"\");\n  const [myUsername, setMyUsername] = useState<string>(\"\");\n  const [peerUsername, setPeerUsername] = useState<string>(\"\");\n \n\n  const subscriptionRef = useRef<StompSubscription | null>(null);\n  const didSubscribeRef = useRef(false);\n  const sessionIdRef = useRef<string>(sessionId);\n\n   // Handler function for processing messages\n   const handleMessage = (messageBody: string) => {\n    try {\n      const data = JSON.parse(messageBody) as ChatMessage;\n      \n      // Validate message structure\n      if (data && typeof data.message === 'string') {\n        // Track peer's username from their messages\n        if (data.senderSessionId && data.senderSessionId !== sessionIdRef.current) {\n          if (data.username) {\n            setPeerUsername(data.username);\n          }\n        }\n        \n        // Ensure roomId and senderSessionId are set for room-based chat\n        const roomMessage: ChatMessage = {\n          ...data,\n          roomId: matchData.roomId,\n          senderSessionId: data.senderSessionId || sessionIdRef.current,\n          timestamp: data.timestamp || Date.now(),\n        };\n        \n        setMessages((prev) => [...prev, roomMessage]);\n      }\n    } catch (error) {\n      console.error(\"Failed to parse chat message:\", error);\n    }\n  };\n\n  const setupConnection = async (isMounted: boolean) => {\n    try {\n      const client = getStompClient();\n      await waitForConnection(client);\n\n      if (!isMounted) return;\n\n      // React StrictMode can run effects twice in dev; guard to avoid double subscribe\n      if (didSubscribeRef.current) return;\n      didSubscribeRef.current = true;\n\n      // Subscribe to room-specific topic\n      subscriptionRef.current = client.subscribe(\n        `/topic/chat/${matchData.roomId}`,\n        (message: IMessage) => handleMessage(message.body)\n      );\n    } catch (error) {\n      console.error(\"Failed to setup chat connection:\", error);\n    }\n  };\n  \n  // Generate or retrieve username for current user\n  useEffect(() => {\n    const storedUsername = sessionStorage.getItem(`chat_username_${sessionId}`);\n    if (storedUsername) {\n      setMyUsername(storedUsername);\n    } else {\n      // Generate a unique guest username using sessionId (UUID) to ensure uniqueness\n      // Each UUID is unique, so we use multiple parts of it to create a unique numeric identifier\n      const uuidHex = sessionId.replace(/-/g, '');\n      // Use parts from different sections of the UUID and combine them\n      const part1 = parseInt(uuidHex.substring(0, 6), 16);\n      const part2 = parseInt(uuidHex.substring(8, 14), 16);\n      const part3 = parseInt(uuidHex.substring(16, 22), 16);\n      // Combine all parts using XOR to distribute values better\n      const combined = (part1 ^ part2 ^ part3) % 99999999;\n      const usernameSuffix = String(combined + 1).padStart(8, '0'); // +1 to avoid 00000000\n      const username = `Friend${usernameSuffix}`;\n      sessionStorage.setItem(`chat_username_${sessionId}`, username);\n      setMyUsername(username);\n    }\n  }, [sessionId]);\n\n  // Keep sessionId ref updated\n  useEffect(() => {\n    sessionIdRef.current = sessionId;\n  }, [sessionId]);\n\n  useEffect(() => {\n    let isMounted = true;\n    setupConnection(isMounted);\n\n    return () => {\n      isMounted = false;\n      didSubscribeRef.current = false;\n\n      if (subscriptionRef.current) {\n        subscriptionRef.current.unsubscribe();\n        subscriptionRef.current = null;\n      }\n    };\n  }, [matchData.roomId]);\n\n  const sendMessage = async () => {\n    const messageText = input.trim();\n    if (!messageText) return;\n\n    try {\n      // Moderate message before sending\n      const moderationResponse = await fetch('/api/moderate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ message: messageText }),\n      });\n\n      const moderationResult = await moderationResponse.json();\n\n      if (!moderationResult.isAppropriate) {\n        alert(`Message cannot be sent: ${moderationResult.reason || 'Content violates community guidelines'}`);\n        return;\n      }\n\n      const client = getStompClient();\n      await waitForConnection(client);\n\n      const chatMessage = {\n        roomId: matchData.roomId,\n        senderSessionId: sessionId,\n        message: messageText,\n        username: myUsername, // Send our username so backend can use it\n      };\n\n      client.publish({\n        destination: \"/app/chat.send\",\n        body: JSON.stringify(chatMessage),\n      });\n\n      setInput(\"\");\n    } catch (error) {\n      console.error(\"Failed to send message:\", error);\n      alert(\"Failed to send message. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"h-[calc(100vh-4rem)] flex flex-col\">\n      <div className=\"bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4 sm:p-6 mb-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"h4 text-white mb-1\">Chat Room</h2>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\n              <p className=\"text-sm text-white/80\">\n                {peerUsername \n                  ? `Connected to ${peerUsername}`\n                  : \"Connected\"}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg p-4 sm:p-6 overflow-y-auto mb-4 min-h-0\">\n        {messages.length === 0 ? (\n          <div className=\"text-center text-white/60 mt-8\">\n            <h3 className=\"h3 text-white mb-1\">Start the conversation!</h3>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {messages.map((m, idx) => {\n              const isMyMessage = m.senderSessionId === sessionIdRef.current;\n              const timestamp = typeof m.timestamp === 'string' ? new Date(m.timestamp).getTime() : m.timestamp;\n              const showDateSeparator = shouldShowDateSeparator(m, messages[idx - 1]);\n              \n              return (\n                <div key={idx}>\n                  {showDateSeparator && (\n                    <div className=\"flex justify-center my-4\">\n                      <span className=\"text-xs text-white/50 bg-white/10 px-3 py-1 rounded-full\">\n                        {formatDateSeparator(timestamp)}\n                      </span>\n                    </div>\n                  )}\n                  <div className={`flex ${isMyMessage ? 'justify-end' : 'justify-start'} mb-1`}\n                  >\n                    <div \n                      className={`max-w-[75%] sm:max-w-[65%] ${\n                        isMyMessage \n                          ? 'bg-blue-600 text-white rounded-2xl rounded-tr-sm' \n                          : 'bg-white/20 text-white rounded-2xl rounded-tl-sm'\n                      } px-4 py-2.5 shadow-sm`}\n                      title={formatFullTimestamp(timestamp)}\n                    >\n                      <div className=\"text-sm sm:text-base wrap-break-word leading-relaxed\">\n                        {m.message}\n                      </div>\n                      <div className={`text-[10px] opacity-70 mt-1.5 flex ${isMyMessage ? 'justify-end' : 'justify-start'}`}>\n                        {formatMessageTime(timestamp)}\n                      </div>\n                    </div>\n                    </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex gap-2 items-end\">\n        <div className=\"flex-1 relative\">\n          <textarea\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"Type a message...\"\n            rows={1}\n            className=\"w-full p-3 sm:p-4 text-base bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 focus:bg-white/20 resize-none min-h-[48px] max-h-32 overflow-y-auto scrollbar-hide\"\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                e.preventDefault();\n                sendMessage();\n              }\n            }}\n            style={{\n              height: 'auto',\n            }}\n            onInput={(e) => {\n              const target = e.target as HTMLTextAreaElement;\n              target.style.height = 'auto';\n              target.style.height = `${Math.min(target.scrollHeight, 128)}px`;\n            }}\n          />\n        </div>\n        <button \n          onClick={sendMessage}\n          disabled={!input.trim()}\n          className=\"px-5 sm:px-6 py-3 sm:py-4 bg-white height-8 text-blue-600 rounded-2xl font-medium hover:bg-white/90 active:scale-95 transition-all focus:outline-none focus:ring-2 focus:ring-white/50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white flex items-center justify-center min-w-[64px]\"\n        >\n          <svg \n            xmlns=\"http://www.w3.org/2000/svg\" \n            viewBox=\"0 0 20 20\" \n            fill=\"currentColor\" \n            className=\"w-5 h-9\"\n          >\n            <path d=\"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n}\n\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}